<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title></title>
	<meta name="generator" content="LibreOffice 5.2.7.2 (Linux)"/>
	<meta name="created" content="00:00:00"/>
	<meta name="changedby" content="Mark Grant"/>
	<meta name="changed" content="2018-05-18T10:25:04.011880046"/>
	<meta name="created" content="00:00:00">
	<meta name="changedby" content="Mark Grant">
	<meta name="changed" content="2018-05-18T10:22:07.784688785">
	<meta name="created" content="00:00:00">
	<meta name="changedby" content="Mark Grant">
	<meta name="changed" content="2018-04-28T08:47:14.803593662">
	<meta name="created" content="00:00:00">
	<meta name="changedby" content="Mark Grant">
	<meta name="changed" content="2018-04-28T08:01:41.121090303">
	<style type="text/css">
		@page { margin: 2cm }
		p { margin-bottom: 0.25cm; line-height: 120% }
		h1 { margin-bottom: 0.21cm }
		h1.western { font-family: "Liberation Sans", sans-serif; font-size: 18pt }
		h1.cjk { font-family: "Droid Sans Fallback"; font-size: 18pt }
		h1.ctl { font-family: "FreeSans"; font-size: 18pt }
	</style>
</head>
<body lang="en-GB" dir="ltr">
<h1 class="western" align="center">Adding A Repo As A Subdirectory</h1>
<p align="left"><br/>
<br/>

</p>
<p align="left">This covers adding a repo root into another repo.
i.e.</p>
<p align="left">full + cli-dev 
</p>
<p align="left">gives</p>
<p align="left">full</p>
<p align="left">I-- dev</p>
<p align="left"><br/>
<br/>

</p>
<p align="left"><br/>
<br/>

</p>
<ol>
	<li/>
<p align="left">Make a backup.</p>
	<li/>
<p align="left">Go to the target root directory (full)</p>
	<ol type="a">
		<li/>
<p align="left">cd blah/blah/full</p>
	</ol>
	<li/>
<p align="left">Checkout master.</p>
	<ol type="a">
		<li/>
<p align="left">git checkout master</p>
	</ol>
	<li/>
<p align="left">Add a remote to the subdirectory repo you wish
	to add (cli-dev).</p>
	<ol type="a">
		<li/>
<p align="left">git remote add cli-dev
		<a href="mailto:git@hermes">git@hermes</a>:/srv/git/C/libswocclient-dev.git</p>
	</ol>
	<li/>
<p align="left">Get the subdirectory data.</p>
	<ol type="a">
		<li/>
<p align="left">git fetch cli-dev â€“no-tags</p>
	</ol>
	<li/>
<p align="left">Checkout a new branch in full which actually
	contains the subdirectory master branch.</p>
	<ol type="a">
		<li/>
<p align="left">git checkout -b mg cli-dev/master</p>
	</ol>
	<li/>
<p align="left">Move back to the full master branch.</p>
	<ol type="a">
		<li/>
<p align="left">git checkout master</p>
	</ol>
	<li/>
<p align="left">Now merge branch mg into subdirectory cli-dev
	(i.e. full/cli-dev).</p>
	<ol type="a">
		<li/>
<p align="left">git merge --allow-unrelated-histories -s
		recursive -Xsubtree=cli-dev mg</p>
	</ol>
	<li/>
<p align="left">Fix conflicts.</p>
	<li/>
<p align="left">Maybe remove cli-dev/.gitignore (old project
	root).</p>
	<li/>
<p align="left">Maybe run ../bootstrap.sh -mg .. and make
	distclean.</p>
	<li/>
<p align="left">Commit the merge.</p>
	<ol type="a">
		<li/>
<p align="left">git commit -sm 'Merge from
		libswocclient-dev.git'</p>
	</ol>
	<li/>
<p align="left">Remove the temporary parts.</p>
	<ol type="a">
		<li/>
<p align="left">git remote remove cli-dev</p>
		<li/>
<p align="left">git branch -d mg</p>
	</ol>
</ol>
<p align="left"><br/>
<br/>

</p>
</body>
</html>